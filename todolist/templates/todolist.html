{% extends 'base.html' %}

{% block content %}

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
<style>
    
    .navbar {
        margin-bottom: 50px;
    }
    .todolist {
        font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif
    }
    a {
        text-decoration: none;
        color: #ffffff;
    }
    a:hover {
        color: inherit;
    }
    h2 {
        margin-bottom: 20px;
    }
    .table {
        overflow-wrap: break-word;
        margin-top: 30px;
    }
</style>

<body>
    <div class="todolist">
        <div style="text-align: center;">

            <!-- NAVBAR -->
            <nav class="navbar navbar-expand-lg navbar-dark" style="background-color: #198754;">
                <div class="container-fluid py-2 px-4">
                    <a class="navbar-brand px-2" href="#" style="color: #ffffff;">Welcome, {{user}}!</a>
                    <button class="btn btn-danger mx-3" style="background-color: #f3f3f3; color: #198754; border: #ffffff;" 
                        type="submit" onclick="location.href=`{% url 'todolist:logout' %}`">Logout</button>
                    </div>
            </nav>
        
            <h2>To Do List</h2>
        
            <button class="btn btn-success col-6" style="margin-bottom: 25px;"><a href="{% url 'todolist:add_task' %}">Tambah Task</a></button>

            <!-- <div class="mt-3 p-3">
                <table class="table">   
                    <tr>
                        <th scope="col">TANGGAL</th>
                        <th scope="col">JUDUL</th>
                        <th scope="col">DESKRIPSI</th>
                        <th scope="col">STATUS</th>
                        <th scope="col">UBAH</th>
                        <th scope="col">HAPUS</th>
                        
                    </tr>
                    
                    {% comment %} Tambahkan data di bawah baris ini {% endcomment %}
                        {% for task in data_task %}
                            <tr>
                                <td scope="row">{{task.date}}</td>
                                <td scope="row" style="max-width: 100px;">{{task.title}}</td>
                                <td scope="row" style="max-width: 500px;">{{task.description}}</td>
                
                                {% if task.is_finished %}
                                    <td scope="row">Selesai</td>
                                {% else %}
                                    <td scope="row">Belum Selesai</td>
                                {% endif %}
                                <td scope="row">
                                    <button class="btn btn-success"><a href="{% url 'todolist:update_task' pk=task.id %}">Ubah Status</a></button>
                                <td scope="row">
                                    <button class="btn btn-success"><a href="{% url 'todolist:delete_task' pk=task.id %}">Hapus Task</a></button>
                            </tr>
                        {% endfor %}
                </table>
            </div> -->

            <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
                {% for task in data_task %}
                    <div class="col">
                        <div class="card shadow-sm h-100">
                            <div class="card-body">
                                <small class="text-muted">{{task.date}}</small>
                                <h3 class="card-text mb-3">{{task.title}}</h3>
                                <p class="card-text">{{task.description}}</p>

                                {% if task.is_finished %}
                                    <h6 class="text-success">Selesai</h6>
                                {% else %}
                                    <h6 class="text-danger">Belum Selesai</h6>
                                {% endif %}

                                <div class="btn-group">
                                    <a href="{% url 'todolist:update_task' pk=task.id %}" class="btn btn-success btn-outline-light">Ubah Status</a>
                                    <a href="{% url 'todolist:delete_task' pk=task.id %}" class="btn btn-success btn-outline-light">Hapus Task</a>
                            
                                </div>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        
            <!-- <button style="padding: 10px;"><a href="{% url 'todolist:logout' %}">Logout</a></button> -->
        
        </div>
    </div>
</body>

{% endblock content %}